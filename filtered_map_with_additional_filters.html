<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>フィルターマップ</title>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyB9tYurID-InfpH6hQCf1DMwVCGqF80KiM&callback=initMap" async defer></script>
    <style>
        body, html {
            height: 100%;
            margin: 0;
            padding: 0;
        }
        #map {
            height: 80vh;
            width: 100%;
        }
        #controls {
            position: absolute;
            top: 10px;
            left: 10px;
            background: white;
            padding: 10px;
            border-radius: 5px;
            box-shadow: 0px 0px 5px rgba(0,0,0,0.2);
            z-index: 5;
        }
        .filter-btn {
            margin: 5px;
            padding: 10px;
            background-color: #f1f1f1;
            border: 1px solid #ccc;
            border-radius: 5px;
            cursor: pointer;
        }
        .filter-btn.active {
            background-color: #4CAF50;
            color: white;
        }
        input[type="number"], input[type="range"] {
            width: 80px;
        }
    </style>
</head>
<body>
    <div id="controls">
        <label>収容人数: 
            <input type="number" id="minCapacity" min="0" max="5000" value="0" oninput="syncValue('minCapacity')">
            <input type="range" id="minCapacitySlider" min="0" max="5000" value="0" oninput="syncSlider('minCapacity')">
        </label><br>
        <label>授業料: 
            <input type="number" id="maxTuition" min="0" max="10000" value="10000" oninput="syncValue('maxTuition')">
            <input type="range" id="maxTuitionSlider" min="0" max="10000" value="10000" oninput="syncSlider('maxTuition')">
        </label><br>
        <label>男女比率 (%): 
            <input type="number" id="minGenderRatio" min="0" max="100" value="0" oninput="syncValue('minGenderRatio')">
            <input type="range" id="minGenderRatioSlider" min="0" max="100" value="0" oninput="syncSlider('minGenderRatio')">
        </label><br>
        
        <p>学食:</p>
        <button class="filter-btn" id="mealAll" onclick="toggleFilter('meal', '')">全部</button>
        <button class="filter-btn" id="mealFree" onclick="toggleFilter('meal', '無料')">無料</button>
        <button class="filter-btn" id="mealPaid" onclick="toggleFilter('meal', '有料')">有料</button><br>

        <p>学校の種類:</p>
        <button class="filter-btn" id="typeAll" onclick="toggleFilter('type', '')">全部</button>
        <button class="filter-btn" id="typePublic" onclick="toggleFilter('type', '公立')">公立</button>
        <button class="filter-btn" id="typePrivate" onclick="toggleFilter('type', '私立')">私立</button><br>

        <p id="pinCount">表示されている学校の数: 0</p>
    </div>
    <div id="map"></div>
    <script>
        var schools = [
    { 
        "name": "北海道学習センター", 
        "lat": 43.0801322, 
        "lng": 141.3397807, 
        "address": "北海道札幌市北区北17条西8丁目（北海道大学札幌キャンパス情報教育館5・6階）",
        "tuition": 6355, 
        "capacity": 996,
        "genderRatio": 0.0,
        "meal": "無料",
        "type": "公立"
    },
    { 
        "name": "旭川サテライトスペース", 
        "lat": 43.7755653, 
        "lng": 142.357348, 
        "address": "北海道旭川市常磐公園（旭川市常磐館内）",
        "tuition": 6970, 
        "capacity": 331,
        "genderRatio": 50.0,
        "meal": "有料",
        "type": "私立"
    },
    { 
        "name": "青森学習センター", 
        "lat": 40.5875052, 
        "lng": 140.4739789, 
        "address": "青森県弘前市文京町3（弘前大学　コラボ弘大7階）",
        "tuition": 7053, 
        "capacity": 993,
        "genderRatio": 0.0,
        "meal": "無料",
        "type": "私立"
    },
    { 
        "name": "八戸サテライトスペース", 
        "lat": 40.5081449, 
        "lng": 141.4312628, 
        "address": "青森県八戸市一番町1－9－22（ユートリー４階）",
        "tuition": 3627, 
        "capacity": 714,
        "genderRatio": 50.0,
        "meal": "有料",
        "type": "公立"
    },
    { 
        "name": "岩手学習センター", 
        "lat": 39.7157757, 
        "lng": 141.1373354, 
        "address": "岩手県盛岡市上田3－18－8（岩手大学図書館3・4階）",
        "tuition": 6864, 
        "capacity": 432,
        "genderRatio": 50.0,
        "meal": "無料",
        "type": "私立"
    },
    { 
        "name": "宮城学習センター", 
        "lat": 38.2541772, 
        "lng": 140.873698, 
        "address": "宮城県仙台市青葉区片平2－1－1（東北大学片平キャンパス内）",
        "tuition": 5375, 
        "capacity": 454,
        "genderRatio": 0.0,
        "meal": "無料",
        "type": "私立"
    },
    { 
        "name": "秋田学習センター", 
        "lat": 39.7267997, 
        "lng": 140.1331747, 
        "address": "秋田県秋田市手形学園町1－1（秋田大学手形キャンパス地方創生センター２号館４階）",
        "tuition": 6426, 
        "capacity": 484,
        "genderRatio": 0.0,
        "meal": "無料",
        "type": "公立"
    },
    { 
        "name": "山形学習センター", 
        "lat": 38.2500132, 
        "lng": 140.3268363, 
        "address": "山形県山形市城南町1－1－1（霞城セントラル10階）",
        "tuition": 6251, 
        "capacity": 346,
        "genderRatio": 50.0,
        "meal": "有料",
        "type": "私立"
    },
    { 
        "name": "福島学習センター", 
        "lat": 37.3972134, 
        "lng": 140.3521074, 
        "address": "福島県郡山市桑野1－22－21（郡山女子大学内）",
        "tuition": 6121, 
        "capacity": 806,
        "genderRatio": 50.0,
        "meal": "無料",
        "type": "公立"
    },
    { 
        "name": "いわきサテライトスペース", 
        "lat": 37.0570123, 
        "lng": 140.9087282, 
        "address": "福島県いわき市平鎌田字寿金沢22－1（東日本国際大学5号館5階）",
        "tuition": 6542, 
        "capacity": 627,
        "genderRatio": 0.0,
        "meal": "無料",
        "type": "私立"
    },
    { 
        "name": "茨城学習センター", 
        "lat": 36.401437, 
        "lng": 140.4432558, 
        "address": "茨城県水戸市文京2－1－1（茨城大学水戸キャンパス環境リサーチラボラトリー2・3階）",
        "tuition": 4088, 
        "capacity": 440,
        "genderRatio": 100.0,
        "meal": "無料",
        "type": "私立"
    },
    { 
        "name": "栃木学習センター", 
        "lat": 36.5499776, 
        "lng": 139.9139901, 
        "address": "栃木県宇都宮市峰町350（宇都宮大学峰キャンパス附属図書館1・2階）",
        "tuition": 4355, 
        "capacity": 324,
        "genderRatio": 100.0,
        "meal": "有料",
        "type": "公立"
    },
    { 
        "name": "群馬学習センター", 
        "lat": 36.3986917, 
        "lng": 139.0737398, 
        "address": "群馬県前橋市若宮町1－13－2",
        "tuition": 5538, 
        "capacity": 637,
        "genderRatio": 0.0,
        "meal": "無料",
        "type": "私立"
    },
    { 
        "name": "埼玉学習センター", 
        "lat": 35.9081351, 
        "lng": 139.6215016, 
        "address": "埼玉県さいたま市大宮区錦町682－2（JACK大宮ビル8・9・10階）",
        "tuition": 4682, 
        "capacity": 626,
        "genderRatio": 50.0,
        "meal": "有料",
        "type": "私立"
    },
    { 
        "name": "千葉学習センター", 
        "lat": 35.6531543, 
        "lng": 140.0496527, 
        "address": "千葉県千葉市美浜区若葉2－11（放送大学本部敷地内）",
        "tuition": 4550, 
        "capacity": 865,
        "genderRatio": 50.0,
        "meal": "無料",
        "type": "私立"
    },
    { 
        "name": "東京渋谷学習センター", 
        "lat": 35.6573178, 
        "lng": 139.6991481, 
        "address": "東京都渋谷区道玄坂1－10－7（五島育英会ビル内1階）",
        "tuition": 4369, 
        "capacity": 858,
        "genderRatio": 100.0,
        "meal": "有料",
        "type": "私立"
    },
    { 
        "name": "東京文京学習センター", 
        "lat": 35.7196475, 
        "lng": 139.7374679, 
        "address": "東京都文京区大塚3－29－1（筑波大学東京キャンパス文京校舎内）",
        "tuition": 3758, 
        "capacity": 879,
        "genderRatio": 100.0,
        "meal": "無料",
        "type": "私立"
    },
    { 
        "name": "東京足立学習センター", 
        "lat": 35.7565419, 
        "lng": 139.8026746, 
        "address": "東京都足立区千住5－13－5（学びピア21（6階））",
        "tuition": 3407, 
        "capacity": 338,
        "genderRatio": 100.0,
        "meal": "有料",
        "type": "私立"
    },
    { 
        "name": "東京多摩学習センター", 
        "lat": 35.7201608, 
        "lng": 139.4754072, 
        "address": "東京都小平市学園西町1－29－1（一橋大学小平国際キャンパス国際共同研究センター3・4階）",
        "tuition": 5418, 
        "capacity": 325,
        "genderRatio": 50.0,
        "meal": "無料",
        "type": "公立"
    },
    { 
        "name": "神奈川学習センター", 
        "lat": 35.4231425, 
        "lng": 139.6054072, 
        "address": "神奈川県横浜市南区大岡2－31－1",
        "tuition": 4748, 
        "capacity": 922,
        "genderRatio": 0.0,
        "meal": "無料",
        "type": "私立"
    },
    { 
        "name": "新潟学習センター", 
        "lat": 37.9199108, 
        "lng": 139.0339743, 
        "address": "新潟県新潟市中央区旭町通1番町754（新潟大学旭町キャンパス医歯学図書館4～6階）",
        "tuition": 5738, 
        "capacity": 305,
        "genderRatio": 100.0,
        "meal": "無料",
        "type": "公立"
    },
    { 
        "name": "富山学習センター", 
        "lat": 36.7062612, 
        "lng": 137.0978366, 
        "address": "富山県射水市黒河5180（富山県立大学計算機センター3階）",
        "tuition": 4811, 
        "capacity": 376,
        "genderRatio": 100.0,
        "meal": "無料",
        "type": "私立"
    },
    { 
        "name": "石川学習センター", 
        "lat": 36.5287195, 
        "lng": 136.6290107, 
        "address": "石川県野々市市扇が丘7－1（金沢工業大学扇が丘キャンパス9号館）",
        "tuition": 6734, 
        "capacity": 863,
        "genderRatio": 100.0,
        "meal": "無料",
        "type": "私立"
    },
    { 
        "name": "福井学習センター", 
        "lat": 36.0605311, 
        "lng": 136.2234672, 
        "address": "福井県福井市手寄1－4－1（AOSSA7階）",
        "tuition": 6543, 
        "capacity": 417,
        "genderRatio": 50.0,
        "meal": "無料",
        "type": "私立"
    },
    { 
        "name": "山梨学習センター", 
        "lat": 35.6781243, 
        "lng": 138.5719726, 
        "address": "山梨県甲府市武田4－4－37（山梨大学甲府キャンパス総合研究棟Y号館隣接建物内）",
        "tuition": 7581, 
        "capacity": 822,
        "genderRatio": 50.0,
        "meal": "無料",
        "type": "公立"
    },
    { 
        "name": "長野学習センター", 
        "lat": 36.046941, 
        "lng": 138.1171209, 
        "address": "長野県諏訪市諏訪1-6-1（アーク諏訪3階）",
        "tuition": 6124, 
        "capacity": 608,
        "genderRatio": 50.0,
        "meal": "無料",
        "type": "私立"
    },
    { 
        "name": "岐阜学習センター", 
        "lat": 35.3918274, 
        "lng": 136.7152564, 
        "address": "岐阜県岐阜市藪田南5－14－53（OKBふれあい会館第2棟2階）",
        "tuition": 3458, 
        "capacity": 319,
        "genderRatio": 100.0,
        "meal": "有料",
        "type": "私立"
    },
    { 
        "name": "静岡学習センター", 
        "lat": 35.1291792, 
        "lng": 138.9115975, 
        "address": "静岡県三島市文教町1－3－93（静岡県立三島長陵高等学校2階）",
        "tuition": 4389, 
        "capacity": 884,
        "genderRatio": 50.0,
        "meal": "無料",
        "type": "公立"
    },
    { 
        "name": "浜松サテライトスペース", 
        "lat": 34.7102936, 
        "lng": 137.7338417, 
        "address": "静岡県浜松市中区早馬町2－1（クリエート浜松2・4階）",
        "tuition": 5735, 
        "capacity": 619,
        "genderRatio": 0.0,
        "meal": "無料",
        "type": "公立"
    },
    { 
        "name": "愛知学習センター", 
        "lat": 35.1797099, 
        "lng": 136.8800797, 
        "address": "愛知県名古屋市西区則武新町3ー1ー17（BIZrium名古屋5階）",
        "tuition": 4593, 
        "capacity": 936,
        "genderRatio": 100.0,
        "meal": "無料",
        "type": "公立"
    },
    { 
        "name": "三重学習センター", 
        "lat": 34.7436994, 
        "lng": 136.5008744, 
        "address": "三重県津市一身田上津部田1234（三重県総合文化センター生涯学習棟4階）",
        "tuition": 3968, 
        "capacity": 590,
        "genderRatio": 50.0,
        "meal": "無料",
        "type": "公立"
    },
    { 
        "name": "滋賀学習センター", 
        "lat": 34.9637497, 
        "lng": 135.9407369, 
        "address": "滋賀県大津市瀬田大江町横谷1－5（龍谷大学瀬田キャンパス4号館1階）",
        "tuition": 3961, 
        "capacity": 501,
        "genderRatio": 0.0,
        "meal": "無料",
        "type": "私立"
    },
    { 
        "name": "京都学習センター", 
        "lat": 34.9863552, 
        "lng": 135.7557187, 
        "address": "京都府京都市下京区西洞院通塩小路下る東塩小路町939（キャンパスプラザ京都3階）",
        "tuition": 3276, 
        "capacity": 833,
        "genderRatio": 50.0,
        "meal": "無料",
        "type": "私立"
    },
    { 
        "name": "大阪学習センター", 
        "lat": 34.6478005, 
        "lng": 135.5197993, 
        "address": "大阪府大阪市天王寺区南河堀町4－88（大阪教育大学天王寺キャンパス中央館6・7階）",
        "tuition": 7912, 
        "capacity": 593,
        "genderRatio": 0.0,
        "meal": "有料",
        "type": "公立"
    },
    { 
        "name": "兵庫学習センター", 
        "lat": 34.7275932, 
        "lng": 135.2361148, 
        "address": "兵庫県神戸市灘区六甲台町2－1（神戸大学六甲台第1キャンパスアカデミア館6・7階）",
        "tuition": 3787, 
        "capacity": 819,
        "genderRatio": 50.0,
        "meal": "無料",
        "type": "私立"
    },
    { 
        "name": "姫路サテライトスペース", 
        "lat": 34.8337126, 
        "lng": 134.6939092, 
        "address": "兵庫県姫路市本町68－290（イーグレひめじ地下2階）",
        "tuition": 6031, 
        "capacity": 956,
        "genderRatio": 100.0,
        "meal": "無料",
        "type": "私立"
    },
    { 
        "name": "奈良学習センター", 
        "lat": 34.6887436, 
        "lng": 135.830413, 
        "address": "奈良県奈良市北魚屋東町（奈良女子大学コラボレーションセンター3階）",
        "tuition": 7144, 
        "capacity": 336,
        "genderRatio": 0.0,
        "meal": "有料",
        "type": "公立"
    },
    { 
        "name": "和歌山学習センター", 
        "lat": 34.207179, 
        "lng": 135.1701332, 
        "address": "和歌山県和歌山市西高松1－7－20（和歌山大学松下会館内）",
        "tuition": 4188, 
        "capacity": 761,
        "genderRatio": 0.0,
        "meal": "無料",
        "type": "私立"
    },
    { 
        "name": "鳥取学習センター", 
        "lat": 35.4917141, 
        "lng": 134.227074, 
        "address": "鳥取県鳥取市富安2－138－4（鳥取市役所駅南庁舎5階）",
        "tuition": 5159, 
        "capacity": 783,
        "genderRatio": 0.0,
        "meal": "無料",
        "type": "公立"
    },
    { 
        "name": "島根学習センター", 
        "lat": 35.4652766, 
        "lng": 133.0559895, 
        "address": "島根県松江市白潟本町43（スティックビル4階）",
        "tuition": 7382, 
        "capacity": 491,
        "genderRatio": 50.0,
        "meal": "有料",
        "type": "公立"
    },
    { 
        "name": "岡山学習センター", 
        "lat": 34.6881007, 
        "lng": 133.9184921, 
        "address": "岡山県岡山市北区津島中3－1－1（岡山大学構津島キャンパス文化科学系総合研究棟5・6階）",
        "tuition": 4955, 
        "capacity": 897,
        "genderRatio": 0.0,
        "meal": "無料",
        "type": "公立"
    },
    { 
        "name": "広島学習センター", 
        "lat": 34.3810124, 
        "lng": 132.4572886, 
        "address": "広島県広島市中区東千田町1－1－89（広島大学東千田キャンパス東千田総合校舎3・4階）",
        "tuition": 6306, 
        "capacity": 776,
        "genderRatio": 100.0,
        "meal": "無料",
        "type": "公立"
    },
    { 
        "name": "福山サテライトスペース", 
        "lat": 34.4827996, 
        "lng": 133.3660237, 
        "address": "広島県福山市霞町1－10－1（まなびの館ローズコム3階）",
        "tuition": 4834, 
        "capacity": 520,
        "genderRatio": 50.0,
        "meal": "無料",
        "type": "私立"
    },
    { 
        "name": "山口学習センター", 
        "lat": 34.1491516, 
        "lng": 131.4691602, 
        "address": "山口県山口市吉田1677－1（山口大学吉田キャンパス構大学会館内）",
        "tuition": 4381, 
        "capacity": 455,
        "genderRatio": 100.0,
        "meal": "有料",
        "type": "私立"
    },
    { 
        "name": "徳島学習センター", 
        "lat": 34.0699272, 
        "lng": 134.5598132, 
        "address": "徳島県徳島市新蔵町2－24（徳島大学新蔵キャンパス日亜会館3階）",
        "tuition": 7764, 
        "capacity": 717,
        "genderRatio": 100.0,
        "meal": "有料",
        "type": "私立"
    },
    { 
        "name": "香川学習センター", 
        "lat": 34.3426046, 
        "lng": 134.0365182, 
        "address": "香川県高松市幸町1－1（香川大学幸町北キャンパス研究交流棟7・8階）",
        "tuition": 3368, 
        "capacity": 513,
        "genderRatio": 100.0,
        "meal": "有料",
        "type": "公立"
    },
    { 
        "name": "愛媛学習センター", 
        "lat": 33.8498313, 
        "lng": 132.7703139, 
        "address": "愛媛県松山市文京町3（愛媛大学城北キャンパス総合情報メディアセンター棟3・4階）",
        "tuition": 4122, 
        "capacity": 647,
        "genderRatio": 0.0,
        "meal": "有料",
        "type": "公立"
    },
    { 
        "name": "高知学習センター", 
        "lat": 33.5490378, 
        "lng": 133.4867352, 
        "address": "高知県高知市曙町2－5－1（高知大学朝倉キャンパスメディアの森内）",
        "tuition": 5921, 
        "capacity": 383,
        "genderRatio": 100.0,
        "meal": "無料",
        "type": "私立"
    },
    { 
        "name": "福岡学習センター", 
        "lat": 33.5217354, 
        "lng": 130.4768567, 
        "address": "福岡県春日市春日公園6－1（九州大学筑紫キャンパス内Ｅ棟4・5階）",
        "tuition": 4181, 
        "capacity": 443,
        "genderRatio": 100.0,
        "meal": "有料",
        "type": "公立"
    },
    { 
        "name": "北九州サテライトスペース", 
        "lat": 33.8664232, 
        "lng": 130.7646817, 
        "address": "福岡県北九州市八幡西区黒崎3－15－3（コムシティ3階）",
        "tuition": 6791, 
        "capacity": 979,
        "genderRatio": 100.0,
        "meal": "有料",
        "type": "私立"
    },
    { 
        "name": "佐賀学習センター", 
        "lat": 33.2601359, 
        "lng": 130.2920272, 
        "address": "佐賀県佐賀市天神3－2－11（アバンセ4階）",
        "tuition": 6830, 
        "capacity": 617,
        "genderRatio": 0.0,
        "meal": "無料",
        "type": "私立"
    },
    { 
        "name": "長崎学習センター", 
        "lat": 32.786195, 
        "lng": 129.8651815, 
        "address": "長崎県長崎市文教町1－14（長崎大学文教キャンパス内）",
        "tuition": 4187, 
        "capacity": 898,
        "genderRatio": 50.0,
        "meal": "有料",
        "type": "公立"
    },
    { 
        "name": "熊本学習センター", 
        "lat": 32.8146541, 
        "lng": 130.7276076, 
        "address": "熊本県熊本市中央区黒髪2－40－1（熊本大学附属図書館南棟2・3階）",
        "tuition": 6684, 
        "capacity": 900,
        "genderRatio": 50.0,
        "meal": "有料",
        "type": "公立"
    },
    { 
        "name": "大分学習センター", 
        "lat": 33.3125282, 
        "lng": 131.4913963, 
        "address": "大分県別府市北石垣82（別府大学別府キャンパス39号館2階）",
        "tuition": 5498, 
        "capacity": 965,
        "genderRatio": 0.0,
        "meal": "有料",
        "type": "私立"
    },
    { 
        "name": "宮崎学習センター", 
        "lat": 32.423476, 
        "lng": 131.6241459, 
        "address": "宮崎県日向市本町11－11（日向市役所北隣）",
        "tuition": 7913, 
        "capacity": 988,
        "genderRatio": 50.0,
        "meal": "有料",
        "type": "公立"
    },
    { 
        "name": "鹿児島学習センター", 
        "lat": 31.5995409, 
        "lng": 130.5578295, 
        "address": "鹿児島県鹿児島市山下町14－50（かごしま県民交流センター西棟4階）",
        "tuition": 6600, 
        "capacity": 775,
        "genderRatio": 0.0,
        "meal": "無料",
        "type": "私立"
    },
    { 
        "name": "沖縄学習センター", 
        "lat": 26.2464216, 
        "lng": 127.7660659, 
        "address": "沖縄県中頭郡西原町字千原1（琉球大学地域国際学習センター棟4・5階）",
        "tuition": 7913, 
        "capacity": 374,
        "genderRatio": 50.0,
        "meal": "無料",
        "type": "公立"
    }
];

        var map;
        var markers = [];
        var mealFilter = "";
        var typeFilter = "";

        function initMap() {
            map = new google.maps.Map(document.getElementById("map"), {
                zoom: 5,
                center: { lat: 35.6895, lng: 139.6917 }
            });
            updateFilters();
        }

        function syncSlider(id) {
            document.getElementById(id).value = document.getElementById(id + "Slider").value;
            updateFilters();
        }

        function syncValue(id) {
            document.getElementById(id + "Slider").value = document.getElementById(id).value;
            updateFilters();
        }

        function toggleFilter(category, value) {
            if (category === "meal") mealFilter = value;
            if (category === "type") typeFilter = value;
            updateFilters();
        }

        function updateFilters() {
            let minCapacity = parseInt(document.getElementById("minCapacity").value);
            let maxTuition = parseInt(document.getElementById("maxTuition").value);
            let minGenderRatio = parseInt(document.getElementById("minGenderRatio").value);

            displaySchools(minCapacity, maxTuition, minGenderRatio);
        }

        function displaySchools(minCapacity, maxTuition, minGenderRatio) {
            markers.forEach(marker => marker.setMap(null));
            markers = [];

            let pinCount = 0;
            schools.forEach(function(school) {
                if (school.capacity < minCapacity) return;
                if (school.tuition > maxTuition) return;
                if (school.genderRatio < minGenderRatio) return;
                if (mealFilter && school.meal !== mealFilter) return;
                if (typeFilter && school.type !== typeFilter) return;

                var marker = new google.maps.Marker({
                    position: { lat: school.lat, lng: school.lng },
                    map: map,
                    title: school.name
                });
                markers.push(marker);
                pinCount++;
            });

            document.getElementById("pinCount").innerText = "表示されている学校の数: " + pinCount;
        }
    </script>
</body>
</html>
